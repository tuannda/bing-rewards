<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Random Bing Search with Scroll</title>
    <style>
        iframe {
            width: 100%;
            height: 800px;
            border: 1px solid #ccc;
        }
    </style>
</head>
<body>
    <h1>Random Bing Search with Scroll</h1>
    <p id="waitTime">Waiting time: 0s</p>
    <iframe id="msBingFrame" src="https://www.bing.com"></iframe>

    <script>
        const words = [
            "apple", "banana", "cat", "dog", "elephant", "fish", "grape", 
            "house", "ice", "jungle", "kite", "lemon", "monkey", "nest", 
            "orange", "panda", "queen", "rabbit", "sun", "tree"
        ];

        const main = () => {
            const iframe = document.getElementById('msBingFrame');
            const waitTimeDisplay = document.getElementById('waitTime');
            let counter = 0;

            const randomText = () => {
                const wordCount = Math.floor(Math.random() * 10) + 1;
                let generatedText = [];
                for (let i = 0; i < wordCount; i++) {
                    const randomWord = words[Math.floor(Math.random() * words.length)];
                    generatedText.push(randomWord);
                }
                return generatedText.join(' ');
            };

            // Hàm giả lập scroll
            const simulateScroll = () => {
                const iframeWindow = iframe.contentWindow;
                if (iframeWindow) {
                    // Cuộn ngẫu nhiên: xuống dưới hoặc lên trên
                    const scrollDistance = Math.floor(Math.random() * 500) + 100; // Cuộn 100-600px
                    const direction = Math.random() > 0.5 ? 1 : -1; // Ngẫu nhiên lên hoặc xuống
                    iframeWindow.scrollBy(0, scrollDistance * direction);
                    console.log(`Scrolled ${scrollDistance * direction}px`);
                }
            };

            const func = () => {
                const searchString = randomText();
                iframe.src = `https://www.bing.com/search?q=${searchString}&PC=U316&form=ASDSBZ`;
                const randomInterval = Math.floor(Math.random() * 11) * 1000 + 10000;

                counter++;
                // Hiển thị thời gian chờ trên giao diện
                const waitSeconds = counter % 3 === 0 ? 240 : randomInterval / 1000;
                waitTimeDisplay.textContent = `Counter: ${counter}, Waiting time: ${waitSeconds}s`;

                if (counter % 3 === 0) {
                    waitTimeDisplay.textContent += " (1 minutes pause)";
                    setTimeout(func, 1 * 60 * 1000); // Chờ 1 phút
                } else if (counter < 35) {
                    setTimeout(func, randomInterval);
                }
            };

            func();
        };

        window.onload = main;
    </script>
</body>
</html>
